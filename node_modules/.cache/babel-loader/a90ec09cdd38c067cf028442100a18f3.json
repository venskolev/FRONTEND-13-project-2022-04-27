{"ast":null,"code":"var _jsxFileName = \"/home/user/Documents/DCI/backand/BACKEND-13-project-2022-04-27/frontend/src/components/edituser.js\";\nimport React, { useState, useEffect } from 'react'; // import { Redirect } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\nimport { editUser, initEdit } from '../redux/action-creators/users';\nimport { getUser } from '../redux/action-creators/users';\nimport { setAlert } from '../redux/action-creators/alert';\nimport { Loading, Alert } from './utils'; // import axios from 'axios';\n\nconst EditUser = _ref => {\n  let {\n    setAlert,\n    editUser,\n    alertContent,\n    history,\n    editSuccess,\n    match,\n    isLoading,\n    isGetting,\n    initEdit,\n    getUser,\n    user,\n    error,\n    getError\n  } = _ref;\n  const id = match.params.userId;\n  const stdSex = ['f', 'm', 'female', 'male'];\n  const [userData, setUserData] = useState({\n    firstname: '',\n    lastname: '',\n    sex: '',\n    age: '',\n    jobTitle: ''\n  }); // const getUserById = (id, setUserData) => {\n  //   axios\n  //     .get(`http://localhost:5000/api/users/${id}`)\n  //     .then(res => {\n  //       setUserData({\n  //         ...userData,\n  //         firstname: res.data.firstname,\n  //         lastname: res.data.lastname,\n  //         jobТitle: res.data.jobТitle,\n  //         age: res.data.age\n  //       });\n  //     })\n  //     .catch(err => setAlert(err));\n  // };\n  // const cbGetUserById = useCallback((id, getUserById, setUserData) => {\n  //   getUserById(id, setUserData);\n  // }, id);\n\n  useEffect(() => {\n    getUser(id, setUserData); // return () => {\n    //   setUserData({ ...user });\n    // };\n    // getUserById(id, setUserData);\n  }, [getUser, id]);\n  const {\n    firstname,\n    lastname,\n    sex,\n    age,\n    jobTitle\n  } = userData;\n\n  const handleChange = e => {\n    setUserData({ ...userData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleEdit = e => {\n    e.preventDefault();\n\n    if (firstname === 0) {\n      setAlert('Firstname pls!');\n    } else {\n      editUser({\n        id,\n        firstname,\n        lastname,\n        sex,\n        age,\n        jobTitle\n      }, history, initEdit);\n    }\n  };\n\n  const handleBack = () => {\n    history.push('/');\n  };\n\n  const disableEdit = (firstname, lastname, sex, age, jobTitle, user) => {\n    return !(firstname && lastname && sex && age && jobTitle && /^[a-zA-Z]+$/.test(firstname) && /^[a-zA-Z]+$/.test(lastname) && /^[a-zA-Z]+$/.test(jobTitle) && !isNaN(age) && Math.abs(parseInt(age)).toString() === age.toString()) || user.firstname === firstname && user.lastname === lastname && user.jobTitle === jobTitle && user.age === age;\n  }; // in render it can do, but not recommand\n  // if (editSuccess) {\n  //   initEdit();\n  //   history.push('/');\n  // }\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, //   editSuccess ? (\n  //   <Redirect to='/' />\n  // ) :\n  isLoading || isGetting ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Edit User\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => handleEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    className: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Blank with * is reuiqred\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"* First Name:\", ' ', /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"firstname\",\n    value: firstname,\n    onChange: e => handleChange(e),\n    placeholder: \"firstname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }), !firstname && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"empty\",\n    item: \"firstname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 32\n    }\n  }), firstname && !/^[a-zA-Z]+$/.test(firstname) && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"invalid\",\n    item: \"firstname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, \"* Last Name:\", ' ', /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"lastname\",\n    value: lastname,\n    onChange: e => handleChange(e),\n    placeholder: \"lastname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }), !lastname && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"empty\",\n    item: \"lastname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 31\n    }\n  }), lastname && !/^[a-zA-Z]+$/.test(lastname) && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"invalid\",\n    item: \"lastname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"* Job Title:\", ' ', /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"jobTitle\",\n    value: jobTitle,\n    onChange: e => handleChange(e),\n    placeholder: \"jobTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"Valid inputs Office position\"), !jobTitle && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"empty\",\n    item: \"jobTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 31\n    }\n  }), jobTitle && !/^[a-zA-Z]+$/.test(jobTitle) && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"invalid\",\n    item: \"jobTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"* Age:\", ' ', /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"age\",\n    value: age,\n    onChange: e => handleChange(e),\n    placeholder: \"age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }), !age && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"empty\",\n    item: \"age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 26\n    }\n  }), age && (isNaN(age) || Math.abs(parseInt(age)).toString() !== age.toString()) && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"invalid\",\n    item: \"age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  })), error && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"server\",\n    item: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }), getError && /*#__PURE__*/React.createElement(Alert, {\n    warning: \"server\",\n    item: \"get\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\" // value='Submit'\n    ,\n    type: \"submit\",\n    disabled: disableEdit(firstname, lastname, jobTitle, age, user),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-arrow-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }), \" Save Changes\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    onClick: handleBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-arrow-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 21\n    }\n  }), \" Back\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, alertContent))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    alertContent: state.alert.alertContent,\n    editSuccess: state.editUser.editSuccess,\n    isLoading: state.editUser.isLoading,\n    isGetting: state.getUser.isLoading,\n    user: state.getUser.user,\n    error: state.editUser.error,\n    getError: state.getUser.error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAlert: alert => dispatch(setAlert(alert)),\n    editUser: (data, history) => dispatch(editUser(data, history)),\n    initEdit: () => dispatch(initEdit()),\n    getUser: (id, setUserData) => dispatch(getUser(id, setUserData))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditUser);","map":{"version":3,"sources":["/home/user/Documents/DCI/backand/BACKEND-13-project-2022-04-27/frontend/src/components/edituser.js"],"names":["React","useState","useEffect","connect","editUser","initEdit","getUser","setAlert","Loading","Alert","EditUser","alertContent","history","editSuccess","match","isLoading","isGetting","user","error","getError","id","params","userId","stdSex","userData","setUserData","firstname","lastname","sex","age","jobTitle","handleChange","e","target","name","value","handleEdit","preventDefault","handleBack","push","disableEdit","test","isNaN","Math","abs","parseInt","toString","mapStateToProps","state","alert","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n// import { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { editUser, initEdit } from '../redux/action-creators/users';\nimport { getUser } from '../redux/action-creators/users';\nimport { setAlert } from '../redux/action-creators/alert';\nimport { Loading, Alert } from './utils';\n// import axios from 'axios';\n\nconst EditUser = ({\n  setAlert,\n  editUser,\n  alertContent,\n  history,\n  editSuccess,\n  match,\n  isLoading,\n  isGetting,\n  initEdit,\n  getUser,\n  user,\n  error,\n  getError\n}) => {\n  const id = match.params.userId;\n  const stdSex = ['f', 'm', 'female', 'male'];\n\n  const [userData, setUserData] = useState({\n    firstname: '',\n    lastname: '',\n    sex: '',\n    age: '',\n    jobTitle: ''\n  });\n\n  // const getUserById = (id, setUserData) => {\n  //   axios\n  //     .get(`http://localhost:5000/api/users/${id}`)\n  //     .then(res => {\n  //       setUserData({\n  //         ...userData,\n  //         firstname: res.data.firstname,\n  //         lastname: res.data.lastname,\n  //         jobТitle: res.data.jobТitle,\n  //         age: res.data.age\n  //       });\n  //     })\n  //     .catch(err => setAlert(err));\n  // };\n\n  // const cbGetUserById = useCallback((id, getUserById, setUserData) => {\n  //   getUserById(id, setUserData);\n  // }, id);\n\n  useEffect(() => {\n    getUser(id, setUserData);\n    // return () => {\n    //   setUserData({ ...user });\n    // };\n    // getUserById(id, setUserData);\n  }, [getUser, id]);\n\n  const { firstname, lastname, sex, age, jobTitle } = userData;\n\n  const handleChange = e => {\n    setUserData({ ...userData, [e.target.name]: e.target.value });\n  };\n\n  const handleEdit = e => {\n    e.preventDefault();\n    if (firstname === 0) {\n      setAlert('Firstname pls!');\n    } else {\n      editUser(\n        { id, firstname, lastname, sex, age, jobTitle },\n        history,\n        initEdit\n      ); \n    }\n  };\n\n  const handleBack = () => {\n    history.push('/');\n  };\n\n  const disableEdit = (\n    firstname,\n    lastname,\n    sex,\n    age,\n    jobTitle,\n    user\n  ) => {\n    return (\n      !(\n        firstname &&\n        lastname &&\n        sex&&\n        age &&\n        jobTitle &&\n        /^[a-zA-Z]+$/.test(firstname) &&\n        /^[a-zA-Z]+$/.test(lastname) &&\n        /^[a-zA-Z]+$/.test(jobTitle) &&\n        !isNaN(age) &&\n        Math.abs(parseInt(age)).toString() === age.toString()\n      ) ||\n      (user.firstname === firstname &&\n        user.lastname === lastname &&\n        user.jobTitle === jobTitle &&\n        user.age === age)\n    );\n  };\n\n  // in render it can do, but not recommand\n  // if (editSuccess) {\n  //   initEdit();\n  //   history.push('/');\n  // }\n\n  return (\n    <div>\n      {//   editSuccess ? (\n      //   <Redirect to='/' />\n      // ) :\n      isLoading || isGetting ? (\n        <Loading />\n      ) : (\n        <div>\n          <div className='create'>Edit User</div>\n          <div className='container'>\n            <form onSubmit={e => handleEdit(e)}>\n              <small className='form-text text-muted'>\n                Blank with * is reuiqred\n              </small>\n              <div className='form-group'>\n                * First Name:{' '}\n                <input\n                  className='form-control'\n                  name='firstname'\n                  value={firstname}\n                  onChange={e => handleChange(e)}\n                  placeholder='firstname'\n                />\n                {!firstname && <Alert warning='empty' item='firstname' />}\n                {firstname && !/^[a-zA-Z]+$/.test(firstname) && (\n                  <Alert warning='invalid' item='firstname' />\n                )}\n              </div>\n              <div className='form-group'>\n                * Last Name:{' '}\n                <input\n                  className='form-control'\n                  name='lastname'\n                  value={lastname}\n                  onChange={e => handleChange(e)}\n                  placeholder='lastname'\n                />\n                {!lastname && <Alert warning='empty' item='lastname' />}\n                {lastname && !/^[a-zA-Z]+$/.test(lastname) && (\n                  <Alert warning='invalid' item='lastname' />\n                )}\n              </div>\n              <div className='form-group'>\n                * Job Title:{' '}\n                <input\n                  className='form-control'\n                  name='jobTitle'\n                  value={jobTitle}\n                  onChange={e => handleChange(e)}\n                  placeholder='jobTitle'\n                />\n                <small className='form-text text-muted'>\n                  Valid inputs Office position\n                </small>\n                {!jobTitle && <Alert warning='empty' item='jobTitle' />}\n                {jobTitle && !/^[a-zA-Z]+$/.test(jobTitle) && (\n                  <Alert warning='invalid' item='jobTitle' />\n                )}\n              </div>\n              <div className='form-group'>\n                * Age:{' '}\n                <input\n                  className='form-control'\n                  name='age'\n                  value={age}\n                  onChange={e => handleChange(e)}\n                  placeholder='age'\n                />\n                {!age && <Alert warning='empty' item='age' />}\n                {age &&\n                  (isNaN(age) ||\n                    Math.abs(parseInt(age)).toString() !== age.toString()) && (\n                    <Alert warning='invalid' item='age' />\n                  )}\n                \n              </div>\n              {error && <Alert warning='server' item='edit' />}\n              {getError && <Alert warning='server' item='get' />}\n              <div className='btn-row'>\n                <div className='btn-left'>\n                  <button\n                    className='btn btn-success'\n                    // value='Submit'\n                    type='submit'\n                    disabled={\n                      disableEdit(\n                        firstname,\n                        lastname,\n                        jobTitle,\n                        age,\n                        user\n                      )\n                    }\n                  >\n                    <i className='fas fa-arrow-down' /> Save Changes\n                  </button>\n                </div>\n                <div className='btn-middle' />\n\n                <div className='btn-right'>\n                  <button className='btn btn-secondary' onClick={handleBack}>\n                    <i className='fas fa-arrow-left' /> Back\n                  </button>\n                </div>\n              </div>\n            </form>\n            <div className='alert-text'>{alertContent}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    alertContent: state.alert.alertContent,\n    editSuccess: state.editUser.editSuccess,\n    isLoading: state.editUser.isLoading,\n    isGetting: state.getUser.isLoading,\n    user: state.getUser.user,\n    error: state.editUser.error,\n    getError: state.getUser.error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAlert: alert => dispatch(setAlert(alert)),\n    editUser: (data, history) => dispatch(editUser(data, history)),\n    initEdit: () => dispatch(initEdit()),\n    getUser: (id, setUserData) => dispatch(getUser(id, setUserData))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(EditUser);\n"]},"metadata":{},"sourceType":"module"}