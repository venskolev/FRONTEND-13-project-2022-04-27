{"ast":null,"code":"var _jsxFileName = \"/home/user/Documents/DCI/backand/BACKEND-13-project-2022-04-27/frontend/src/components/home.js\";\nimport React, { useState, useEffect } from 'react';\nimport { setUserList } from '../redux/action-creators/users';\nimport { connect } from 'react-redux';\nimport { initUser, initEdit, deleteUser } from '../redux/action-creators/users';\nimport { Loading, Alert } from './utils';\nimport Table from './table';\n\nconst Home = _ref => {\n  let {\n    users,\n    setUserList,\n    history,\n    initUser,\n    initEdit,\n    deleteUser,\n    isLoading,\n    error,\n    deleteError\n  } = _ref;\n  useEffect(() => {\n    initUser();\n    initEdit();\n    setUserList();\n  }, []);\n  const [query, setQuery] = useState('');\n  const [actAttr, setActAttr] = useState('');\n  const [sortType, setSortType] = useState(0);\n  const [queryCur, setQueryCur] = useState('');\n  const [activePage, setActivePage] = useState(1);\n\n  const handleChange = e => {\n    if (e.target.id === 'search') {\n      setQuery(e.target.value);\n    }\n  };\n\n  const handleCreate = e => {\n    history.push('/createuser');\n  };\n\n  const handleSearch = e => {\n    e.preventDefault();\n    setActivePage(1);\n    setQueryCur(query);\n  };\n\n  const handleEdit = id => {\n    history.push(`/edituser/${id}`);\n  };\n\n  const handleDelete = id => {\n    deleteUser(id);\n  };\n\n  const handleSort = e => {\n    if (e.target.id === actAttr) {\n      setSortType((sortType + 1) % 3);\n    } else {\n      setSortType(1);\n    }\n\n    setActAttr(e.target.id);\n  }; // const sortUserByAttr = (users, attribute) => {\n  //   switch (attribute) {\n  //     case 'firstname':\n  //       return [...users].sort((a, b) =>\n  //         a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //           ? 1\n  //           : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //           ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //             ? 1\n  //             : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //             ? a.age > b.age\n  //               ? 1\n  //               : a.age === b.age\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n  //     case 'lastname':\n  //       return [...users].sort((a, b) =>\n  //         a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //           ? 1\n  //           : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.age > b.age\n  //               ? 1\n  //               : a.age === b.age\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n  //     case 'sex':\n  //       return [...users].sort((a, b) =>\n  //         a.sex.toLowerCase().slice(0, 1) > b.sex.toLowerCase().slice(0, 1)\n  //           ? 1\n  //           : a.sex.toLowerCase().slice(0, 1) ===\n  //             b.sex.toLowerCase().slice(0, 1)\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.age > b.age\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n  //     case 'age':\n  //       return [...users].sort((a, b) =>\n  //         a.age > b.age\n  //           ? 1\n  //           : a.age === b.age\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n  //       case 'jobTitle':\n  //         return [...users].sort((a, b) =>\n  //           a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //             ? 1\n  //             : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //             ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.age > b.age\n  //                 ? 1\n  //                 : a.age === b.age\n  //                 ? a.sex.toLowerCase().slice(0, 1) >\n  //                   b.sex.toLowerCase().slice(0, 1)\n  //                   ? 1\n  //                   : -1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         );\n  //     default:\n  //       return [...users];\n  //   }\n  // };\n  // const searchUser = (users, queryCur) => {\n  //   return users.filter(\n  //     user =>\n  //       user.firstname\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1 ||\n  //       user.lastname\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1 ||\n  //       user.sex.toLowerCase().indexOf(queryCur.toString().toLowerCase()) !==\n  //         -1 ||\n  //       user.age.toString().indexOf(queryCur.toString()) !== -1 ||\n  //       user.jobTitle\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1\n  //   );\n  // };\n  // const selectSort = (sortType, users, actAttr) => {\n  //   switch (sortType) {\n  //     case 1:\n  //       return sortUserByAttr(users, actAttr);\n  //     case 2:\n  //       return [...sortUserByAttr(users, actAttr)].reverse();\n  //     default:\n  //       return users;\n  //   }\n  // };\n\n\n  const activeUser = (queryCur, sortType, users, actAttr) => {\n    if (queryCur) {\n      const searchedUsers = searchUser(users, queryCur);\n      return selectSort(sortType, searchedUsers, actAttr);\n    } else {\n      return selectSort(sortType, users, actAttr);\n    }\n  };\n\n  if (activeUser(queryCur, sortType, users, actAttr).length > 0 && activeUser(queryCur, sortType, users, actAttr).length === activePage - 1) {\n    // if it is this page's last user, after delete, back to prev page\n    // empty list stay in 1st page\n    setActivePage(activePage - 1);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar navbar-light bg-light mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"navbar-brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"display-3 danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 42\n    }\n  }, \"PERSONAL RECRUITING\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex gap-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-inline p-5\",\n    onSubmit: e => handleSearch(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, ' ', /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control mr-sm-2\",\n    type: \"search\",\n    placeholder: \"Search\",\n    \"aria-label\": \"Search\",\n    id: \"search\",\n    value: query,\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-success my-2 my-sm-0\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }\n  }, \"Search\"), \" \"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-success ml-5\",\n    onClick: e => handleCreate(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }), \" Create new User\"))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    queryCur: queryCur,\n    sortType: sortType,\n    users: users,\n    actAttr: actAttr,\n    activeUser: activeUser,\n    activePage: activePage,\n    handleDelete: handleDelete,\n    handleEdit: handleEdit,\n    handleSort: handleSort,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }), error && /*#__PURE__*/React.createElement(Alert, {\n    waring: \"server\",\n    item: \"get\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 23\n    }\n  }), deleteError && /*#__PURE__*/React.createElement(Alert, {\n    waring: \"server\",\n    item: \"delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 29\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users.users,\n    isLoading: state.users.isLoading,\n    error: state.users.error,\n    deleteError: state.users.deleteError\n  };\n};\n\nconst mapStateToDispatch = dispatch => {\n  return {\n    setUserList: () => dispatch(setUserList()),\n    initUser: () => dispatch(initUser()),\n    initEdit: () => dispatch(initEdit()),\n    deleteUser: id => dispatch(deleteUser(id))\n  };\n};\n\nexport default connect(mapStateToProps, mapStateToDispatch)(Home);","map":{"version":3,"sources":["/home/user/Documents/DCI/backand/BACKEND-13-project-2022-04-27/frontend/src/components/home.js"],"names":["React","useState","useEffect","setUserList","connect","initUser","initEdit","deleteUser","Loading","Alert","Table","Home","users","history","isLoading","error","deleteError","query","setQuery","actAttr","setActAttr","sortType","setSortType","queryCur","setQueryCur","activePage","setActivePage","handleChange","e","target","id","value","handleCreate","push","handleSearch","preventDefault","handleEdit","handleDelete","handleSort","activeUser","searchedUsers","searchUser","selectSort","length","mapStateToProps","state","mapStateToDispatch","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,gCAA5B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,UAA7B,QAA+C,gCAA/C;AACA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,SAA/B;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,IAAI,GAAG,QAUP;AAAA,MAVQ;AACZC,IAAAA,KADY;AAEZT,IAAAA,WAFY;AAGZU,IAAAA,OAHY;AAIZR,IAAAA,QAJY;AAKZC,IAAAA,QALY;AAMZC,IAAAA,UANY;AAOZO,IAAAA,SAPY;AAQZC,IAAAA,KARY;AASZC,IAAAA;AATY,GAUR;AACJd,EAAAA,SAAS,CAAC,MAAM;AACdG,IAAAA,QAAQ;AACRC,IAAAA,QAAQ;AACRH,IAAAA,WAAW;AACZ,GAJQ,EAIN,EAJM,CAAT;AAMA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACkB,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACsB,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACwB,UAAD,EAAaC,aAAb,IAA8BzB,QAAQ,CAAC,CAAD,CAA5C;;AAEA,QAAM0B,YAAY,GAAGC,CAAC,IAAI;AACxB,QAAIA,CAAC,CAACC,MAAF,CAASC,EAAT,KAAgB,QAApB,EAA8B;AAC5BZ,MAAAA,QAAQ,CAACU,CAAC,CAACC,MAAF,CAASE,KAAV,CAAR;AACD;AACF,GAJD;;AAMA,QAAMC,YAAY,GAAGJ,CAAC,IAAI;AACxBf,IAAAA,OAAO,CAACoB,IAAR,CAAa,aAAb;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAGN,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACO,cAAF;AACAT,IAAAA,aAAa,CAAC,CAAD,CAAb;AACAF,IAAAA,WAAW,CAACP,KAAD,CAAX;AACD,GAJD;;AAMA,QAAMmB,UAAU,GAAGN,EAAE,IAAI;AACvBjB,IAAAA,OAAO,CAACoB,IAAR,CAAc,aAAYH,EAAG,EAA7B;AACD,GAFD;;AAIA,QAAMO,YAAY,GAAGP,EAAE,IAAI;AACzBvB,IAAAA,UAAU,CAACuB,EAAD,CAAV;AACD,GAFD;;AAIA,QAAMQ,UAAU,GAAGV,CAAC,IAAI;AACtB,QAAIA,CAAC,CAACC,MAAF,CAASC,EAAT,KAAgBX,OAApB,EAA6B;AAC3BG,MAAAA,WAAW,CAAC,CAACD,QAAQ,GAAG,CAAZ,IAAiB,CAAlB,CAAX;AACD,KAFD,MAEO;AACLC,MAAAA,WAAW,CAAC,CAAD,CAAX;AACD;;AACDF,IAAAA,UAAU,CAACQ,CAAC,CAACC,MAAF,CAASC,EAAV,CAAV;AACD,GAPD,CArCI,CA8CJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AA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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { setUserList } from '../redux/action-creators/users';\nimport { connect } from 'react-redux';\nimport { initUser, initEdit, deleteUser } from '../redux/action-creators/users';\nimport { Loading, Alert } from './utils';\nimport Table from './table';\n\nconst Home = ({\n  users,\n  setUserList,\n  history,\n  initUser,\n  initEdit,\n  deleteUser,\n  isLoading,\n  error,\n  deleteError\n}) => {\n  useEffect(() => {\n    initUser();\n    initEdit();\n    setUserList();\n  }, []); \n \n  const [query, setQuery] = useState(''); \n  const [actAttr, setActAttr] = useState(''); \n  const [sortType, setSortType] = useState(0); \n  const [queryCur, setQueryCur] = useState(''); \n  const [activePage, setActivePage] = useState(1); \n\n  const handleChange = e => {\n    if (e.target.id === 'search') {\n      setQuery(e.target.value);\n    }\n  };\n\n  const handleCreate = e => {\n    history.push('/createuser');\n  };\n\n  const handleSearch = e => {\n    e.preventDefault();\n    setActivePage(1);\n    setQueryCur(query);\n  };\n\n  const handleEdit = id => {\n    history.push(`/edituser/${id}`);\n  };\n\n  const handleDelete = id => {\n    deleteUser(id);\n  };\n\n  const handleSort = e => {\n    if (e.target.id === actAttr) {\n      setSortType((sortType + 1) % 3);\n    } else {\n      setSortType(1);\n    }\n    setActAttr(e.target.id);\n  };\n\n  // const sortUserByAttr = (users, attribute) => {\n  //   switch (attribute) {\n  //     case 'firstname':\n  //       return [...users].sort((a, b) =>\n  //         a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //           ? 1\n  //           : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //           ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //             ? 1\n  //             : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //             ? a.age > b.age\n  //               ? 1\n  //               : a.age === b.age\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n\n  //     case 'lastname':\n  //       return [...users].sort((a, b) =>\n  //         a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //           ? 1\n  //           : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.age > b.age\n  //               ? 1\n  //               : a.age === b.age\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n\n  //     case 'sex':\n  //       return [...users].sort((a, b) =>\n  //         a.sex.toLowerCase().slice(0, 1) > b.sex.toLowerCase().slice(0, 1)\n  //           ? 1\n  //           : a.sex.toLowerCase().slice(0, 1) ===\n  //             b.sex.toLowerCase().slice(0, 1)\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.age > b.age\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n\n  //     case 'age':\n  //       return [...users].sort((a, b) =>\n  //         a.age > b.age\n  //           ? 1\n  //           : a.age === b.age\n  //           ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //               ? 1\n  //               : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //               ? a.sex.toLowerCase().slice(0, 1) >\n  //                 b.sex.toLowerCase().slice(0, 1)\n  //                 ? 1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         : -1\n  //       );\n  //       case 'jobTitle':\n  //         return [...users].sort((a, b) =>\n  //           a.jobTitle.toLowerCase() > b.jobTitle.toLowerCase()\n  //             ? 1\n  //             : a.jobTitle.toLowerCase() === b.jobTitle.toLowerCase()\n  //             ? a.firstname.toLowerCase() > b.firstname.toLowerCase()\n  //             ? 1\n  //             : a.firstname.toLowerCase() === b.firstname.toLowerCase()\n  //             ? a.lastname.toLowerCase() > b.lastname.toLowerCase()\n  //               ? 1\n  //               : a.lastname.toLowerCase() === b.lastname.toLowerCase()\n  //               ? a.age > b.age\n  //                 ? 1\n  //                 : a.age === b.age\n  //                 ? a.sex.toLowerCase().slice(0, 1) >\n  //                   b.sex.toLowerCase().slice(0, 1)\n  //                   ? 1\n  //                   : -1\n  //                 : -1\n  //               : -1\n  //             : -1\n  //           : -1\n  //         );\n        \n\n  //     default:\n  //       return [...users];\n  //   }\n  // };\n\n\n  // const searchUser = (users, queryCur) => {\n  //   return users.filter(\n  //     user =>\n  //       user.firstname\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1 ||\n  //       user.lastname\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1 ||\n  //       user.sex.toLowerCase().indexOf(queryCur.toString().toLowerCase()) !==\n  //         -1 ||\n  //       user.age.toString().indexOf(queryCur.toString()) !== -1 ||\n  //       user.jobTitle\n  //         .toLowerCase()\n  //         .indexOf(queryCur.toString().toLowerCase()) !== -1\n  //   );\n  // };\n\n  // const selectSort = (sortType, users, actAttr) => {\n  //   switch (sortType) {\n  //     case 1:\n  //       return sortUserByAttr(users, actAttr);\n  //     case 2:\n  //       return [...sortUserByAttr(users, actAttr)].reverse();\n  //     default:\n  //       return users;\n  //   }\n  // };\n\n  const activeUser = (queryCur, sortType, users, actAttr) => {\n    if (queryCur) {\n      const searchedUsers = searchUser(users, queryCur);\n      return selectSort(sortType, searchedUsers, actAttr);\n    } else {\n      return selectSort(sortType, users, actAttr);\n    }\n  };\n\n  if (\n    activeUser(queryCur, sortType, users, actAttr).length > 0 &&\n    activeUser(queryCur, sortType, users, actAttr).length ===\n      (activePage - 1) \n  ) {\n    // if it is this page's last user, after delete, back to prev page\n    // empty list stay in 1st page\n    setActivePage(activePage - 1);\n  }\n\n  return (\n    <div>\n      <nav className='navbar navbar-light bg-light mb-2'>\n        <strong className='navbar-brand'><h1 className='display-3 danger'>PERSONAL RECRUITING</h1></strong>\n      <div className='flex gap-3'>\n        <form className='form-inline p-5' onSubmit={e => handleSearch(e)}>\n          {' '}\n          <input\n            className='form-control mr-sm-2'\n            type='search'\n            placeholder='Search'\n            aria-label='Search'\n            id='search'\n            value={query}\n            onChange={e => handleChange(e)}\n          />\n          {/* <input type='submit' value='Search' /> */}\n       \n\n        <button className=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button> </form>\n\n        <button\n          className='btn btn-outline-success ml-5'\n          onClick={e => handleCreate()}\n        >\n          <i className='fas fa-user' /> Create new User\n        </button>\n        </div>\n      </nav>\n      <div>\n        {isLoading ? (\n          <Loading />\n        ) : (\n          <div>\n            <Table\n              queryCur={queryCur}\n              sortType={sortType}\n              users={users}\n              actAttr={actAttr}\n              activeUser={activeUser}\n              activePage={activePage}\n              handleDelete={handleDelete}\n              handleEdit={handleEdit}\n              handleSort={handleSort}\n            />\n            {error && <Alert waring='server' item='get' />}\n            {deleteError && <Alert waring='server' item='delete' />}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users.users,\n    isLoading: state.users.isLoading,\n    error: state.users.error,\n    deleteError: state.users.deleteError\n  };\n};\n\nconst mapStateToDispatch = dispatch => {\n  return {\n    setUserList: () => dispatch(setUserList()),\n    initUser: () => dispatch(initUser()),\n    initEdit: () => dispatch(initEdit()),\n    deleteUser: id => dispatch(deleteUser(id))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapStateToDispatch\n)(Home);"]},"metadata":{},"sourceType":"module"}